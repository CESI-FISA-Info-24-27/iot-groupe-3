# ========================================
# Listeners
# ========================================

# Port MQTT standard
listener 1883
protocol mqtt

# Port WebSocket pour monitoring web
listener 9001
protocol websockets

# ========================================
# Sécurité
# ========================================

# En production, utiliser un fichier de mots de passe
allow_anonymous true

# Pour activer l'authentification (production) :
# allow_anonymous false
# password_file /mosquitto/config/passwd

# ========================================
# Persistance
# ========================================

# Activer la persistance des messages
persistence true
persistence_location /mosquitto/data/

# ========================================
# Logs
# ========================================

log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Types de logs
log_type error
log_type warning
log_type notice
log_type information

# Horodatage des logs
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ========================================
# Performance
# ========================================

# Nombre maximum de connexions simultanées
max_connections -1

# Taille maximale des messages (10 MB)
message_size_limit 10485760
